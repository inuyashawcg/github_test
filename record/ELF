ELF(Executable and Linking Format)
ELF标准旨在通过为开发人员提供一组扩展到多个操作环境的二进制接口定义来简化软件开发。这将减少不同接口实现的数量，从而减少重新编码和重新编译代码的需要

目标文件主要包含三种类型:
 - 可重定位文件保存适合与其他对象文件链接以创建可执行文件或共享对象文件的代码和数据
 - 一个可执行文件保存了一个适合执行的程序；该文件指定了execc（bauos）如何创建程序的进程映像
 - 共享对象文件保存适合在两个上下文中链接的代码和数据。首先，链接编辑器可以与其他可重定位和共享的对象文件一起处理，以创建另一个对象文件。其次，动态链接器将其与可执行文件和其他共享对象组合起来，以创建进程映像

ELF header位于文件的开头，包含描述文件组织的“路线图”。section保存了链接视图的大部分目标文件信息：指令、数据、符号表、重定位信息等
program header table（如果存在）告诉系统如何创建进程映像。用于构建进程映像（执行程序）的文件必须具有程序头表；可重定位的文件不需要程序头表
section header table包含描述文件section的信息，每个section在table中都有一个entry，每一个entry都会提供诸如section名称、大小等信息。链接过程中使用的文件必须要有一个section header table，其他的目标文件可以有，也可以没有
目标文件中的section header table、section、segment等存放的位置其实是不固定的，一般只有elf header有固定的位置

符号表(symbol table)也是保存在一个section

所有参与动态链接的目标文件都会包含有一个hash table section

动态链接需要string，也就是说动态链接跟string table可能有某种关联

有的section的名称前面是带有“.”这个符号，这种类型的section是为系统保留的，应用程序尽管也是可以进行访问，但是要满足具体的一些要求才可以。所以一般应用程序都会避开这些节，以免造成不必要的冲突。目标文件中可能会带有多个具有相同名称的section

在每个符号表中，所有具有STB_LOCAL绑定的符号都在弱符号和全局符号之前

program header table中存放的元素主要是用来描述segment或者可执行程序所需要的信息

///////////////////////// 程序加载 ////////////////////////////
当系统创建或者扩充process image时，它将按照逻辑把file segments 拷贝到 virtual memory segment。系统何时以及是否实际读取文件取决于程序的执行行为、系统负载等。进程不需要物理页，除非它在执行过程中引用逻辑页，而且进程通常会留下许多页未被引用。因此，延迟物理读取通常会排除它们，从而提高系统性能。为了在实践中获得这种效率，可执行文件和共享对象文件必须具有文件偏移量和虚拟地址一致的段映像，并对页面大小进行模化。systemv体系结构段的虚拟地址和文件偏移量是同余模4kb（0x1000）或2的更大幂。因为4KB是最大页面大小，所以无论物理页面大小，文件都适合分页。

从逻辑上讲，系统强制执行内存权限，就好像每个段都是完整和独立的一样。段的地址被调整以确保地址空间中的每个逻辑页都有一组权限。在上面的示例中，保存文本结尾和数据开头的文件区域将被映射两次：text的一个虚拟地址和data的另一个虚拟地址。因此，如果文件的最后一个数据页包含逻辑内存页中没有的信息，则必须将无关数据设置为零，而不是可执行文件的未知内容。

段加载的一个方面不同于可执行文件和共享对象。可执行文件段通常包含绝对代码。为了让进程正确执行，段必须驻留在用于构建可执行文件的虚拟地址中。因此，系统使用未更改的p_vaddr值作为虚拟地址。
另一方面，共享对象段通常包含与位置无关的代码。这使段的虚拟地址从一个进程更改为另一个进程，而不会使执行行为失效。虽然系统为各个进程选择虚拟地址，但它保持了段的相对位置。因为与位置无关的代码在段之间使用相对寻址，所以内存中虚拟地址之间的差异必须与文件中虚拟地址之间的差异相匹配。

//////////////////////// 动态链接 /////////////////////////////
一个可执行文件可以有一个PT_INTERP program header 元素。在exec（BA_OS）期间，系统从PT_INTERP段检索路径名，并从interpreter file's segment创建初始进程映像
系统不会使用原始的可执行文件的segment image，而是会为interpreter构造一个memory image